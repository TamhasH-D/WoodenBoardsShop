<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IDEF0 –î–∏–∞–≥—Ä–∞–º–º—ã - WoodenBoardsShop</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2563eb;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            color: #64748b;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 10px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            flex-wrap: wrap;
        }

        .tab {
            background: transparent;
            border: none;
            padding: 12px 20px;
            margin: 5px;
            border-radius: 10px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #64748b;
            font-size: 0.9rem;
        }

        .tab.active {
            background: #2563eb;
            color: white;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .tab:hover:not(.active) {
            background: #f1f5f9;
            color: #1e293b;
        }

        .diagram-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            overflow-x: auto;
            display: none;
        }

        .diagram-container.active {
            display: block;
        }

        .diagram-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 20px;
            text-align: center;
        }

        .mermaid {
            text-align: center;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .controls {
            text-align: center;
            margin-bottom: 20px;
        }

        .btn {
            background: #2563eb;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .idef0-legend {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .legend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .legend-item {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid #e2e8f0;
        }

        .legend-item.input {
            border-left: 6px solid #10b981;
        }

        .legend-item.output {
            border-right: 6px solid #f59e0b;
        }

        .legend-item.control {
            border-top: 6px solid #ef4444;
        }

        .legend-item.mechanism {
            border-bottom: 6px solid #8b5cf6;
        }

        .legend-item h4 {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 10px;
        }

        .legend-item p {
            color: #64748b;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .hierarchy {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .hierarchy h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 20px;
            text-align: center;
        }

        .hierarchy-tree {
            font-family: 'Courier New', monospace;
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            overflow-x: auto;
            white-space: pre;
            line-height: 1.6;
            color: #1e293b;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .tab {
                padding: 10px 16px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä IDEF0 –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å</h1>
            <p>–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å —Å–∏—Å—Ç–µ–º—ã WoodenBoardsShop –ø–æ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ IDEF0 - –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π —Å–∏—Å—Ç–µ–º—ã –∏ –∏—Ö –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π —á–µ—Ä–µ–∑ –≤—Ö–æ–¥—ã, –≤—ã—Ö–æ–¥—ã, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –º–µ—Ö–∞–Ω–∏–∑–º—ã</p>
        </div>

        <div class="idef0-legend">
            <h3 style="text-align: center; margin-bottom: 20px; color: #1e293b;">üìö –õ–µ–≥–µ–Ω–¥–∞ IDEF0</h3>
            <div class="legend-grid">
                <div class="legend-item input">
                    <h4>‚û°Ô∏è –í—Ö–æ–¥—ã (Input)</h4>
                    <p>–î–∞–Ω–Ω—ã–µ –∏–ª–∏ –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –∏–ª–∏ –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π</p>
                </div>
                <div class="legend-item output">
                    <h4>‚¨ÖÔ∏è –í—ã—Ö–æ–¥—ã (Output)</h4>
                    <p>–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ - —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</p>
                </div>
                <div class="legend-item control">
                    <h4>‚¨áÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (Control)</h4>
                    <p>–ü—Ä–∞–≤–∏–ª–∞, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∏ –ø–æ–ª–∏—Ç–∏–∫–∏, —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–∏</p>
                </div>
                <div class="legend-item mechanism">
                    <h4>‚¨ÜÔ∏è –ú–µ—Ö–∞–Ω–∏–∑–º—ã (Mechanism)</h4>
                    <p>–†–µ—Å—É—Ä—Å—ã, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Å–∏—Å—Ç–µ–º—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏</p>
                </div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showDiagram('context')">A-0: –ö–æ–Ω—Ç–µ–∫—Å—Ç</button>
            <button class="tab" onclick="showDiagram('level0')">A0: –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</button>
            <button class="tab" onclick="showDiagram('catalog')">A2: –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤</button>
            <button class="tab" onclick="showDiagram('analysis')">A3: –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</button>
            <button class="tab" onclick="showDiagram('hierarchy')">–ò–µ—Ä–∞—Ä—Ö–∏—è —Ñ—É–Ω–∫—Ü–∏–π</button>
        </div>

        <div class="controls">
            <button class="btn" onclick="downloadCurrentDiagram()">üíæ –°–∫–∞—á–∞—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—É</button>
            <button class="btn" onclick="resetZoom()">‚Üª –°–±—Ä–æ—Å–∏—Ç—å –º–∞—Å—à—Ç–∞–±</button>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ A-0 -->
        <div id="context" class="diagram-container active">
            <div class="diagram-title">A-0: –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–º –¥—Ä–µ–≤–µ—Å–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤</div>
            <div class="mermaid">
graph TB
    %% –í—Ö–æ–¥—ã
    I1[–ó–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π]
    I2[–î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–æ–≤]
    I3[–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ—Å–æ–∫]
    I4[–°–æ–æ–±—â–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤]
    I5[–ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞]
    
    %% –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
    A0[A-0<br/>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–º<br/>–¥—Ä–µ–≤–µ—Å–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤]
    
    %% –í—ã—Ö–æ–¥—ã
    O1[–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤]
    O2[–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞]
    O3[–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π]
    O4[–û—Ç—á–µ—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞]
    O5[–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º]
    
    %% –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    C1[–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞]
    C2[–ü–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏]
    C3[–°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö]
    C4[–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏]
    
    %% –ú–µ—Ö–∞–Ω–∏–∑–º—ã
    M1[Backend API FastAPI]
    M2[Frontend React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è]
    M3[–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL]
    M4[AI –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏–∑–∞]
    M5[–°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Keycloak]
    M6[–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker]
    
    %% –°–≤—è–∑–∏
    I1 --> A0
    I2 --> A0
    I3 --> A0
    I4 --> A0
    I5 --> A0
    
    A0 --> O1
    A0 --> O2
    A0 --> O3
    A0 --> O4
    A0 --> O5
    
    C1 --> A0
    C2 --> A0
    C3 --> A0
    C4 --> A0
    
    M1 --> A0
    M2 --> A0
    M3 --> A0
    M4 --> A0
    M5 --> A0
    M6 --> A0
    
    %% –°—Ç–∏–ª–∏
    classDef input fill:#dcfce7,stroke:#16a34a,stroke-width:2px
    classDef output fill:#fef3c7,stroke:#d97706,stroke-width:2px
    classDef control fill:#fecaca,stroke:#dc2626,stroke-width:2px
    classDef mechanism fill:#e9d5ff,stroke:#9333ea,stroke-width:2px
    classDef function fill:#dbeafe,stroke:#2563eb,stroke-width:3px
    
    class I1,I2,I3,I4,I5 input
    class O1,O2,O3,O4,O5 output
    class C1,C2,C3,C4 control
    class M1,M2,M3,M4,M5,M6 mechanism
    class A0 function
            </div>
        </div>

        <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ —É—Ä–æ–≤–Ω—è A0 -->
        <div id="level0" class="diagram-container">
            <div class="diagram-title">A0: –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã</div>
            <div class="mermaid">
graph TB
    %% –í—Ö–æ–¥—ã
    I1[–ó–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π]
    I2[–î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–æ–≤]
    I3[–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ—Å–æ–∫]
    I4[–°–æ–æ–±—â–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤]
    I5[–ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞]
    
    %% –§—É–Ω–∫—Ü–∏–∏
    A1[A1<br/>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ<br/>–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏]
    A2[A2<br/>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–æ–º<br/>—Ç–æ–≤–∞—Ä–æ–≤]
    A3[A3<br/>–ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π<br/>–¥–æ—Å–æ–∫]
    A4[A4<br/>–°–∏—Å—Ç–µ–º–∞<br/>–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π]
    A5[A5<br/>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ<br/>—Å–∏—Å—Ç–µ–º—ã]
    
    %% –í—ã—Ö–æ–¥—ã
    O1[–ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π]
    O2[–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤]
    O3[–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞]
    O4[–ü–æ—Ç–æ–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π]
    O5[–û—Ç—á–µ—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞]
    
    %% –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    C1[–ü–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏]
    C2[–ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏]
    C3[–ê–ª–≥–æ—Ä–∏—Ç–º—ã ML]
    C4[–ü—Ä–∞–≤–∏–ª–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏]
    C5[–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏]
    
    %% –ú–µ—Ö–∞–Ω–∏–∑–º—ã
    M1[Keycloak]
    M2[Backend API]
    M3[AI –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å]
    M4[–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö]
    M5[Admin frontend]
    
    %% –°–≤—è–∑–∏ –≤—Ö–æ–¥–æ–≤
    I1 --> A1
    I1 --> A2
    I2 --> A2
    I3 --> A3
    I4 --> A4
    I5 --> A5
    
    %% –°–≤—è–∑–∏ –≤—ã—Ö–æ–¥–æ–≤
    A1 --> O1
    A2 --> O2
    A3 --> O3
    A4 --> O4
    A5 --> O5
    
    %% –°–≤—è–∑–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    C1 --> A1
    C2 --> A2
    C3 --> A3
    C4 --> A4
    C5 --> A5
    
    %% –°–≤—è–∑–∏ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤
    M1 --> A1
    M2 --> A2
    M3 --> A3
    M4 --> A4
    M5 --> A5
    
    %% –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–≤—è–∑–∏
    A1 -.-> A2
    A1 -.-> A4
    A2 -.-> A3
    A4 -.-> A5
    
    %% –°—Ç–∏–ª–∏
    classDef input fill:#dcfce7,stroke:#16a34a,stroke-width:2px
    classDef output fill:#fef3c7,stroke:#d97706,stroke-width:2px
    classDef control fill:#fecaca,stroke:#dc2626,stroke-width:2px
    classDef mechanism fill:#e9d5ff,stroke:#9333ea,stroke-width:2px
    classDef function fill:#dbeafe,stroke:#2563eb,stroke-width:3px
    
    class I1,I2,I3,I4,I5 input
    class O1,O2,O3,O4,O5 output
    class C1,C2,C3,C4,C5 control
    class M1,M2,M3,M4,M5 mechanism
    class A1,A2,A3,A4,A5 function
            </div>
        </div>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä–æ–≤ A2 -->
        <div id="catalog" class="diagram-container">
            <div class="diagram-title">A2: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä–æ–≤</div>
            <div class="mermaid">
graph TB
    %% –í—Ö–æ–¥—ã
    I1[–î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–∞]
    I2[–ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã]
    I3[–û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤]
    I4[–ó–∞–ø—Ä–æ—Å—ã –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ]
    
    %% –ü–æ–¥—Ñ—É–Ω–∫—Ü–∏–∏
    A21[A21<br/>–°–æ–∑–¥–∞–Ω–∏–µ<br/>—Ç–æ–≤–∞—Ä–æ–≤]
    A22[A22<br/>–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è<br/>—Ç–æ–≤–∞—Ä–æ–≤]
    A23[A23<br/>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ<br/>—Ç–æ–≤–∞—Ä–æ–≤]
    A24[A24<br/>–£–¥–∞–ª–µ–Ω–∏–µ<br/>—Ç–æ–≤–∞—Ä–æ–≤]
    
    %% –í—ã—Ö–æ–¥—ã
    O1[–ù–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ]
    O2[–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞]
    O3[–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã]
    O4[–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è]
    
    %% –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    C1[–ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤]
    C2[–ê–ª–≥–æ—Ä–∏—Ç–º—ã –ø–æ–∏—Å–∫–∞]
    C3[–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞]
    C4[–ü–æ–ª–∏—Ç–∏–∫–∏ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è]
    
    %% –ú–µ—Ö–∞–Ω–∏–∑–º—ã
    M1[Seller frontend]
    M2[Buyer frontend]
    M3[Backend API]
    M4[–ü–æ–∏—Å–∫–æ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã]
    M5[UUID –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä]
    
    %% –°–≤—è–∑–∏ –≤—Ö–æ–¥–æ–≤
    I1 --> A21
    I2 --> A22
    I3 --> A23
    I4 --> A24
    
    %% –°–≤—è–∑–∏ –≤—ã—Ö–æ–¥–æ–≤
    A21 --> O1
    A22 --> O2
    A23 --> O3
    A24 --> O4
    
    %% –°–≤—è–∑–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    C1 --> A21
    C2 --> A22
    C3 --> A23
    C4 --> A24
    
    %% –°–≤—è–∑–∏ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤
    M1 --> A21
    M2 --> A22
    M3 --> A23
    M5 --> A24
    
    %% –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–≤—è–∑–∏
    A21 -.-> A22
    A23 -.-> A22
    
    %% –°—Ç–∏–ª–∏
    classDef input fill:#dcfce7,stroke:#16a34a,stroke-width:2px
    classDef output fill:#fef3c7,stroke:#d97706,stroke-width:2px
    classDef control fill:#fecaca,stroke:#dc2626,stroke-width:2px
    classDef mechanism fill:#e9d5ff,stroke:#9333ea,stroke-width:2px
    classDef function fill:#dbeafe,stroke:#2563eb,stroke-width:3px
    
    class I1,I2,I3,I4 input
    class O1,O2,O3,O4 output
    class C1,C2,C3,C4 control
    class M1,M2,M3,M4,M5 mechanism
    class A21,A22,A23,A24 function
            </div>
        </div>

        <!-- –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–æ—Å–æ–∫ A3 -->
        <div id="analysis" class="diagram-container">
            <div class="diagram-title">A3: –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–æ—Å–æ–∫</div>
            <div class="mermaid">
graph TB
    %% –í—Ö–æ–¥—ã
    I1[–ò—Å—Ö–æ–¥–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è]
    I2[–≠—Ç–∞–ª–æ–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã]
    I3[–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–Ω–∞–ª–∏–∑–∞]
    
    %% –ü–æ–¥—Ñ—É–Ω–∫—Ü–∏–∏
    A31[A31<br/>–ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞<br/>–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π]
    A32[A32<br/>AI-–∞–Ω–∞–ª–∏–∑<br/>–¥–æ—Å–æ–∫]
    A33[A33<br/>–†–∞—Å—á–µ—Ç<br/>–æ–±—ä–µ–º–æ–≤]
    A34[A34<br/>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ<br/>—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤]
    
    %% –í—ã—Ö–æ–¥—ã
    O1[–û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è]
    O2[–†–∞–∑–º–µ—Ä—ã –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–æ—Å–æ–∫]
    O3[–û–±—ä–µ–º—ã –¥—Ä–µ–≤–µ—Å–∏–Ω—ã]
    O4[–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏–∑–∞]
    
    %% –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    C1[–°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π]
    C2[–ú–æ–¥–µ–ª–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è]
    C3[–§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞ –æ–±—ä–µ–º–∞]
    C4[–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö]
    
    %% –ú–µ—Ö–∞–Ω–∏–∑–º—ã
    M1[–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π]
    M2[AI –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å]
    M3[–ù–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏]
    M4[–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏]
    M5[PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö]
    
    %% –°–≤—è–∑–∏ –≤—Ö–æ–¥–æ–≤
    I1 --> A31
    I2 --> A32
    I3 --> A32
    
    %% –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏
    A31 --> A32
    A32 --> A33
    A33 --> A34
    
    %% –°–≤—è–∑–∏ –≤—ã—Ö–æ–¥–æ–≤
    A31 --> O1
    A32 --> O2
    A33 --> O3
    A34 --> O4
    
    %% –°–≤—è–∑–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    C1 --> A31
    C2 --> A32
    C3 --> A33
    C4 --> A34
    
    %% –°–≤—è–∑–∏ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤
    M1 --> A31
    M2 --> A32
    M3 --> A32
    M4 --> A33
    M5 --> A34
    
    %% –°—Ç–∏–ª–∏
    classDef input fill:#dcfce7,stroke:#16a34a,stroke-width:2px
    classDef output fill:#fef3c7,stroke:#d97706,stroke-width:2px
    classDef control fill:#fecaca,stroke:#dc2626,stroke-width:2px
    classDef mechanism fill:#e9d5ff,stroke:#9333ea,stroke-width:2px
    classDef function fill:#dbeafe,stroke:#2563eb,stroke-width:3px
    
    class I1,I2,I3 input
    class O1,O2,O3,O4 output
    class C1,C2,C3,C4 control
    class M1,M2,M3,M4,M5 mechanism
    class A31,A32,A33,A34 function
            </div>
        </div>

        <!-- –ò–µ—Ä–∞—Ä—Ö–∏—è —Ñ—É–Ω–∫—Ü–∏–π -->
        <div id="hierarchy" class="diagram-container">
            <div class="hierarchy">
                <h3>üå≥ –ò–µ—Ä–∞—Ä—Ö–∏—è —Ñ—É–Ω–∫—Ü–∏–π IDEF0</h3>
                <div class="hierarchy-tree">A-0: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–º –¥—Ä–µ–≤–µ—Å–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
‚îú‚îÄ‚îÄ A1: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ A11: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ A12: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ A13: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ A14: –ö–æ–Ω—Ç—Ä–æ–ª—å —Å—Ç–∞—Ç—É—Å–∞ –æ–Ω–ª–∞–π–Ω
‚îÇ
‚îú‚îÄ‚îÄ A2: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ A21: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ A22: –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ A23: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ A24: –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ A3: –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–æ—Å–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ A31: –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ A32: AI-–∞–Ω–∞–ª–∏–∑ –¥–æ—Å–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ A33: –†–∞—Å—á–µ—Ç –æ–±—ä–µ–º–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ A34: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ A4: –°–∏—Å—Ç–µ–º–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ A41: –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–µ–¥–æ–≤ –æ–±—â–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ A42: –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ A43: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ A44: –û—Ç–º–µ—Ç–∫–∞ –ø—Ä–æ—á—Ç–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ A45: –ú–æ–¥–µ—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ
‚îî‚îÄ‚îÄ A5: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
    ‚îú‚îÄ‚îÄ A51: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã
    ‚îú‚îÄ‚îÄ A52: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
    ‚îú‚îÄ‚îÄ A53: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã
    ‚îú‚îÄ‚îÄ A54: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
    ‚îî‚îÄ‚îÄ A55: –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#2563eb',
                primaryTextColor: '#1e293b',
                primaryBorderColor: '#3b82f6',
                lineColor: '#64748b',
                sectionBkgColor: '#f8fafc',
                altSectionBkgColor: '#e2e8f0',
                gridColor: '#cbd5e1',
                secondaryColor: '#f1f5f9',
                tertiaryColor: '#f8fafc'
            },
            flowchart: {
                diagramPadding: 20,
                htmlLabels: true,
                curve: 'basis'
            }
        });

        function showDiagram(diagramId) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ –¥–∏–∞–≥—Ä–∞–º–º—ã
            const diagrams = document.querySelectorAll('.diagram-container');
            diagrams.forEach(diagram => diagram.classList.remove('active'));
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∏–∞–≥—Ä–∞–º–º—É
            document.getElementById(diagramId).classList.add('active');
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
        }

        function resetZoom() {
            const activeDiagram = document.querySelector('.diagram-container.active .mermaid svg');
            if (activeDiagram) {
                activeDiagram.style.transform = 'scale(1)';
                activeDiagram.style.transformOrigin = 'center top';
            }
        }

        function downloadCurrentDiagram() {
            const activeDiagram = document.querySelector('.diagram-container.active .mermaid svg');
            if (activeDiagram) {
                const svgData = new XMLSerializer().serializeToString(activeDiagram);
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const img = new Image();
                
                img.onload = function() {
                    canvas.width = img.width;
                    canvas.height = img.height;
                    ctx.fillStyle = 'white';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    ctx.drawImage(img, 0, 0);
                    
                    const activeContainer = document.querySelector('.diagram-container.active');
                    const title = activeContainer.querySelector('.diagram-title, h3').textContent;
                    const filename = `WoodenBoardsShop_IDEF0_${title.replace(/\s+/g, '_').replace(/[^\w]/g, '')}.png`;
                    
                    const link = document.createElement('a');
                    link.download = filename;
                    link.href = canvas.toDataURL();
                    link.click();
                };
                
                img.src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgData)));
            }
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∏–∞–≥—Ä–∞–º–º –∫–æ–ª–µ—Å–∏–∫–æ–º –º—ã—à–∏
        document.addEventListener('wheel', function(e) {
            if (e.ctrlKey) {
                e.preventDefault();
                const activeDiagram = document.querySelector('.diagram-container.active .mermaid svg');
                if (activeDiagram) {
                    const currentScale = activeDiagram.style.transform.match(/scale\(([^)]+)\)/);
                    let scale = currentScale ? parseFloat(currentScale[1]) : 1;
                    
                    scale += e.deltaY > 0 ? -0.1 : 0.1;
                    scale = Math.max(0.5, Math.min(3, scale));
                    
                    activeDiagram.style.transform = `scale(${scale})`;
                    activeDiagram.style.transformOrigin = 'center top';
                }
            }
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
        setTimeout(() => {
            resetZoom();
        }, 1000);
    </script>
</body>
</html>
