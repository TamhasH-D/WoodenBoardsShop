# Тест-кейсы: Аутентификация в Admin Frontend

## TC-AF-AUTH-001: Успешная авторизация администратора
**Приоритет**: Критический  
**Теги**: `#frontend` `#admin` `#auth` `#critical`

### Предусловия
- Система запущена и доступна
- Существует валидный аккаунт администратора в Keycloak
- Браузер поддерживает JavaScript

### Шаги выполнения
1. Открыть URL админ-панели: `http://localhost:8080`
2. Нажать кнопку "Войти" или "Login"
3. Ввести корректные учетные данные администратора
4. Нажать кнопку "Войти" в форме Keycloak

### Ожидаемый результат
- Пользователь перенаправлен на главную страницу админ-панели
- Отображается навигационное меню с разделами управления
- В заголовке отображается имя пользователя
- Доступны все административные функции

### Постусловия
- Пользователь авторизован в системе
- Сессия активна

---

## TC-AF-AUTH-002: Неуспешная авторизация с неверным паролем
**Приоритет**: Высокий  
**Теги**: `#frontend` `#admin` `#auth` `#negative` `#high`

### Предусловия
- Система запущена и доступна
- Существует валидный аккаунт администратора в Keycloak

### Шаги выполнения
1. Открыть URL админ-панели: `http://localhost:8080`
2. Нажать кнопку "Войти"
3. Ввести корректный логин и неверный пароль
4. Нажать кнопку "Войти"

### Ожидаемый результат
- Отображается сообщение об ошибке аутентификации
- Пользователь остается на странице входа
- Доступ к админ-панели не предоставлен

### Постусловия
- Пользователь не авторизован
- Сессия не создана

---

## TC-AF-AUTH-003: Неуспешная авторизация с несуществующим пользователем
**Приоритет**: Высокий  
**Теги**: `#frontend` `#admin` `#auth` `#negative` `#high`

### Предусловия
- Система запущена и доступна

### Шаги выполнения
1. Открыть URL админ-панели: `http://localhost:8080`
2. Нажать кнопку "Войти"
3. Ввести несуществующий логин и любой пароль
4. Нажать кнопку "Войти"

### Ожидаемый результат
- Отображается сообщение об ошибке "Пользователь не найден"
- Пользователь остается на странице входа
- Доступ к админ-панели не предоставлен

---

## TC-AF-AUTH-004: Автоматическое перенаправление неавторизованного пользователя
**Приоритет**: Критический  
**Теги**: `#frontend` `#admin` `#auth` `#security` `#critical`

### Предусловия
- Система запущена и доступна
- Пользователь не авторизован

### Шаги выполнения
1. Открыть прямую ссылку на внутреннюю страницу админ-панели
   Например: `http://localhost:8080/products`
2. Дождаться загрузки страницы

### Ожидаемый результат
- Пользователь автоматически перенаправлен на страницу входа Keycloak
- Внутренние страницы админ-панели недоступны
- После успешной авторизации пользователь перенаправлен на изначально запрошенную страницу

---

## TC-AF-AUTH-005: Выход из системы
**Приоритет**: Высокий  
**Теги**: `#frontend` `#admin` `#auth` `#high`

### Предусловия
- Пользователь авторизован в админ-панели

### Шаги выполнения
1. Находясь в админ-панели, найти кнопку "Выйти" или "Logout"
2. Нажать кнопку выхода
3. Подтвердить выход (если требуется)

### Ожидаемый результат
- Пользователь перенаправлен на страницу входа
- Сессия завершена
- При попытке вернуться на внутренние страницы требуется повторная авторизация

### Постусловия
- Пользователь не авторизован
- Сессия завершена

---

## TC-AF-AUTH-006: Проверка токена при длительной сессии
**Приоритет**: Средний  
**Теги**: `#frontend` `#admin` `#auth` `#session` `#medium`

### Предусловия
- Пользователь авторизован в админ-панели
- Сессия активна более 30 минут

### Шаги выполнения
1. Оставить админ-панель открытой на 30+ минут
2. Попытаться выполнить любое действие (например, создать запись)
3. Наблюдать поведение системы

### Ожидаемый результат
- Система автоматически обновляет токен или запрашивает повторную авторизацию
- Пользователь уведомлен о необходимости обновления сессии
- Данные не теряются при обновлении токена

---

## TC-AF-AUTH-007: Множественные сессии одного пользователя
**Приоритет**: Средний  
**Теги**: `#frontend` `#admin` `#auth` `#session` `#medium`

### Предусловия
- Существует валидный аккаунт администратора

### Шаги выполнения
1. Авторизоваться в админ-панели в первом браузере/вкладке
2. Открыть админ-панель во втором браузере/вкладке
3. Авторизоваться тем же пользователем
4. Проверить работу обеих сессий

### Ожидаемый результат
- Обе сессии работают корректно ИЛИ
- Система уведомляет о множественных сессиях ИЛИ
- Предыдущая сессия завершается автоматически

---

## TC-AF-AUTH-008: Обработка ошибок сети при авторизации
**Приоритет**: Высокий  
**Теги**: `#frontend` `#admin` `#auth` `#network` `#high`

### Предусловия
- Система запущена
- Keycloak временно недоступен или есть проблемы с сетью

### Шаги выполнения
1. Открыть админ-панель
2. Попытаться авторизоваться
3. Наблюдать поведение при сетевых ошибках

### Ожидаемый результат
- Отображается понятное сообщение об ошибке сети
- Предлагается повторить попытку
- Система не "зависает" и остается отзывчивой

---

## TC-AF-AUTH-009: Валидация полей формы входа
**Приоритет**: Средний  
**Теги**: `#frontend` `#admin` `#auth` `#validation` `#medium`

### Предусловия
- Открыта страница входа в админ-панель

### Шаги выполнения
1. Попытаться отправить форму с пустыми полями
2. Ввести только логин без пароля
3. Ввести только пароль без логина
4. Ввести некорректные символы в поля

### Ожидаемый результат
- Отображаются соответствующие сообщения валидации
- Форма не отправляется с невалидными данными
- Пользователь получает четкие инструкции по исправлению

---

## TC-AF-AUTH-010: Интеграция с Keycloak SSO
**Приоритет**: Критический  
**Теги**: `#frontend` `#admin` `#auth` `#keycloak` `#sso` `#critical`

### Предусловия
- Пользователь уже авторизован в другом приложении через Keycloak SSO

### Шаги выполнения
1. Авторизоваться в другом приложении, использующем тот же Keycloak
2. Открыть админ-панель в новой вкладке
3. Наблюдать процесс авторизации

### Ожидаемый результат
- Пользователь автоматически авторизован в админ-панели без ввода учетных данных
- SSO работает корректно
- Роли и права доступа применяются правильно
