# üîß Selenium Troubleshooting Guide

## üö® –ü—Ä–æ–±–ª–µ–º–∞: Selenium Hub –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É —Ç–∏–ø–∞:
```
‚ùå –ü—Ä–æ–±–ª–µ–º–∞: Selenium Hub –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ http://selenium-hub:4444/wd/hub
```

## üîç –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
make selenium-status
```

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
make selenium-diagnostics
```

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
make logs-selenium          # –õ–æ–≥–∏ Hub
make logs-selenium-chrome    # –õ–æ–≥–∏ Chrome Node
```

## üõ†Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
make selenium-fix-local
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- ‚úÖ –£–¥–∞–ª–∏—Ç —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- ‚úÖ –û–±–Ω–æ–≤–∏—Ç Selenium –æ–±—Ä–∞–∑—ã
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å—ã –∑–∞–Ω–æ–≤–æ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç –∏—Ö –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```bash
make selenium-fix        # Python —Å–∫—Ä–∏–ø—Ç (–º–æ–∂–µ—Ç –∏–º–µ—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å DNS)
make selenium-fix-docker # –ß–µ—Ä–µ–∑ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
make selenium-fix-local  # Bash —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```

### –†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

#### –®–∞–≥ 1: –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞
```bash
make down
make clean
```

#### –®–∞–≥ 2: –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –æ–±—Ä–∞–∑–∞–º–∏
```bash
make rebuild
```

#### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π
```bash
make up
make health
```

## üîß –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Hub –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
**–°–∏–º–ø—Ç–æ–º—ã:**
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä selenium-hub –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- Health check –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç

**–†–µ—à–µ–Ω–∏—è:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
make logs-selenium

# –£–≤–µ–ª–∏—á–∏—Ç—å timeout –≤ docker-compose.test.yaml
# –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é –æ–±—Ä–∞–∑–∞ Selenium
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Chrome Node –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Hub
**–°–∏–º–ø—Ç–æ–º—ã:**
- Hub –∑–∞–ø—É—â–µ–Ω, –Ω–æ Node –Ω–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è
- –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö Chrome Node

**–†–µ—à–µ–Ω–∏—è:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
docker network ls
docker network inspect diplom-functional-tests_test_network

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ Selenium —Å–µ—Ä–≤–∏—Å—ã
make selenium-restart
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏ –¥–ª—è Chrome
**–°–∏–º–ø—Ç–æ–º—ã:**
- Chrome Node –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±—Ä–∞—É–∑–µ—Ä–∞
- –û—à–∏–±–∫–∏ "out of memory" –≤ –ª–æ–≥–∞—Ö

**–†–µ—à–µ–Ω–∏—è:**
- –£–≤–µ–ª–∏—á–∏—Ç—å `shm_size` –≤ docker-compose.test.yaml
- –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏–π
- –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏ Docker

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
**–°–∏–º–ø—Ç–æ–º—ã:**
- DNS –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∏–º–µ–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- Timeout –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏

**–†–µ—à–µ–Ω–∏—è:**
```bash
# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Å–µ—Ç–∏
docker network prune
make down
make up

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Docker daemon
sudo systemctl restart docker
```

## üìä –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Selenium

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ docker-compose.test.yaml

#### Selenium Hub
```yaml
selenium-hub:
  image: selenium/hub:4.25.0  # –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
  environment:
    SE_EVENT_BUS_HOST: selenium-hub
    SE_EVENT_BUS_PUBLISH_PORT: 4442
    SE_EVENT_BUS_SUBSCRIBE_PORT: 4443
  healthcheck:
    test: ["CMD", "curl", "-f", "http://localhost:4444/wd/hub/status"]
    interval: 15s
    timeout: 10s
    retries: 10
    start_period: 30s
```

#### Chrome Node
```yaml
selenium-chrome:
  image: selenium/node-chrome:4.25.0  # –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
  environment:
    SE_EVENT_BUS_HOST: selenium-hub
    NODE_MAX_INSTANCES: 2  # –£–º–µ–Ω—å—à–µ–Ω–æ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
    NODE_MAX_SESSION: 2
  shm_size: 2gb  # –£–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å
  healthcheck:
    test: ["CMD", "curl", "-f", "http://localhost:5555/status"]
```

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Selenium

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
make selenium-status         # –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
make selenium-diagnostics    # –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
make logs-selenium          # –õ–æ–≥–∏ Hub
make logs-selenium-chrome   # –õ–æ–≥–∏ Chrome Node
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```bash
make selenium-fix-local     # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
make selenium-fix           # Python —Å–∫—Ä–∏–ø—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
make selenium-restart       # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
make rebuild               # –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
make test-rebuild          # –¢–µ—Å—Ç—ã —Å –ø–µ—Ä–µ—Å–±–æ—Ä–∫–æ–π
make test-browser          # –¢–æ–ª—å–∫–æ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ —Ç–µ—Å—Ç—ã
make health               # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```

## üéØ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
make selenium-status

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
make health

# 3. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
make test-rebuild
```

–£—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å:
- ‚úÖ selenium-hub: –≥–æ—Ç–æ–≤
- ‚úÖ selenium-chrome: –≥–æ—Ç–æ–≤
- ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ health check

## üîç –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Selenium Grid API
```bash
# –í–Ω—É—Ç—Ä–∏ functional-tests –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
curl http://selenium-hub:4444/wd/hub/status
curl http://selenium-hub:4444/grid/api/hub
curl http://selenium-chrome:5555/status
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤–æ–π —Å–≤—è–∑–Ω–æ—Å—Ç–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS
nslookup selenium-hub
ping selenium-hub

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
telnet selenium-hub 4444
telnet selenium-chrome 5555
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ CPU
docker stats selenium-hub selenium-chrome

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker logs -f selenium-hub
docker logs -f selenium-chrome
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤: `make selenium-status`
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω—ã –ª–æ–≥–∏: `make logs-selenium`
- [ ] –ó–∞–ø—É—â–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: `make selenium-diagnostics`
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: `make selenium-fix`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∑–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–∏—Å–æ–≤: `make health`
- [ ] –ó–∞–ø—É—â–µ–Ω—ã —Ç–µ—Å—Ç—ã: `make test-rebuild`
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

1. **–ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞:**
```bash
make clean
docker system prune -f
make test-rebuild
```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤:**
```bash
df -h          # –°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ
free -h        # –ü–∞–º—è—Ç—å
docker system df  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker
```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Docker:**
```bash
sudo systemctl restart docker
```

4. **–û–±—Ä–∞—â–µ–Ω–∏–µ –∑–∞ –ø–æ–º–æ—â—å—é:**
- –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ª–æ–≥–∏: `make logs-selenium > selenium_logs.txt`
- –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É: `make selenium-diagnostics > diagnostics.txt`
- –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –∫ –æ—Ç—á–µ—Ç—É –æ –ø—Ä–æ–±–ª–µ–º–µ

---

**–ü–æ–º–Ω–∏—Ç–µ: –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–æ–±–ª–µ–º Selenium —Ä–µ—à–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π `make selenium-fix-local`! üîß**
